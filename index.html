<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LagneshMitra ‚Äì Astrology with Structure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ================= NAVBAR ================= -->
<nav>
  <div class="brand">LagneshMitra</div>
  <div class="nav-links">
    <a href="index.html" class="active">Home</a>
    <a href="#">Consultation</a>
    <a href="report.html">Reports</a>
    <a href="contact.html">Contact</a>
    <a href="dmlive.html">Live DM</a>
    <a href="chat.html">Chat</a>
  </div>
</nav>

<!-- ================= HERO ================= -->
<div class="main">
  <h2>Astrology with Structure, Not Guesswork</h2>
  <p>
    Marriage ‚Ä¢ Career ‚Ä¢ Timing ‚Ä¢ Karmic Patterns<br>
    Clear answers. No fluff. No drama.
  </p>

  <div class="hero-actions">
    <a href="dmlive.html" class="button">Start Live Chat</a>
    <a href="report.html" class="button">View Reports & Pricing</a>
    <a href="contact.html" class="button">Other Contact Options</a>
  </div>
</div>

<!-- ================= POSTS (AUTO FROM FIREBASE) ================= -->
<div class="post-highlight">
  <h3>Latest Posts</h3>
  <!-- üî• post-card elements will be injected here by posts.js -->
</div>

<!-- ================= POST MODAL ================= -->
<div class="post-modal" id="postModal">
  <div class="post-modal-box">

    <div class="post-close" onclick="closePost()">‚úï</div>

    <h1 id="modalTitle"></h1>

    <div class="post-stats" id="modalMeta"></div>

    <div class="post-content" id="modalContent"></div>

    <div class="post-actions-full">
      <a href="chat.html" class="button">Talk to LagneshMitra</a>
      <button class="button outline" onclick="sharePost()">Share</button>
    </div>

  </div>
</div>

<!-- ================= CORE JS (MODAL CONTROL) ================= -->
<script>
  function openPostFromData(post) {
    document.getElementById("modalTitle").innerText = post.title;

    document.getElementById("modalMeta").innerHTML = `
      <span>üëÅ ${post.views || 0} views</span>
      <span>üìç ${post.source || "Direct"}</span>
    `;

    const contentDiv = document.getElementById("modalContent");
    contentDiv.innerHTML = "";

    post.content.split("\n").forEach(p => {
      if (p.trim()) {
        const para = document.createElement("p");
        para.innerText = p;
        para.style.marginBottom = "18px";   // ‚úÖ body gap fixed
        contentDiv.appendChild(para);
      }
    });

    document.getElementById("postModal").classList.add("active");
    document.body.style.overflow = "hidden";
  }

  function closePost() {
    document.getElementById("postModal").classList.remove("active");
    document.body.style.overflow = "auto";
  }

  function sharePost() {
    if (navigator.share) {
      navigator.share({
        title: document.getElementById("modalTitle").innerText,
        url: window.location.href
      });
    } else {
      alert("Please copy the link and share manually.");
    }
  }
</script>

<!-- ================= FIREBASE + POSTS ================= -->
<script type="module" src="firebase.js"></script>
<script type="module" src="posts.js"></script>

</body>
</html>
